<div class="register-box">
  <!-- Back Arrow -->
  <mat-icon class="back-arrow" (click)="goBack()">arrow_back</mat-icon>

  <!-- Header Section -->
  <div class="header-section">
    <div class="icon-container">
      <mat-icon class="person-icon">person_add</mat-icon>
    </div>
    <h2>CADASTRO</h2>
    <p class="subtitle">Crie sua conta e comece a usar</p>
  </div>

  <!-- Form Section -->
  <form [formGroup]="registerForm" class="form-section">
    <!-- Username Field -->
    <mat-form-field appearance="fill" class="w-full">
      <mat-label>Usuário</mat-label>
      <input matInput type="text" formControlName="username" />
      <mat-icon matPrefix class="field-icon">account_circle</mat-icon>
      <mat-error *ngIf="registerForm.get('username')?.hasError('required')">
        O nome de usuário é obrigatório
      </mat-error>
    </mat-form-field>

    <!-- Email Field -->
    <mat-form-field appearance="fill" class="w-full">
      <mat-label>E-mail</mat-label>
      <input matInput type="email" formControlName="email" />
      <mat-icon matPrefix class="field-icon">email</mat-icon>
      <mat-error *ngIf="registerForm.get('email')?.hasError('email')">
        O e-mail inserido é inválido
      </mat-error>
    </mat-form-field>

    <!-- Password Field -->
    <mat-form-field appearance="fill" class="w-full">
      <mat-label>Senha</mat-label>
      <input
        matInput
        [type]="hidePassword() ? 'password' : 'text'"
        formControlName="password"
        required
      />
      <mat-icon matPrefix class="field-icon">lock</mat-icon>
      <mat-icon
        matSuffix
        class="visibility-icon"
        (click)="hidePassword.set(!hidePassword())"
      >
        {{ hidePassword() ? 'visibility_off' : 'visibility' }}
      </mat-icon>
      <mat-error *ngIf="registerForm.get('password')?.hasError('minlength')">
        O limite mínimo para a senha é de 8 caracteres
      </mat-error>
    </mat-form-field>

    <!-- Password Requirements -->
    <div class="password-requirements">
      <h4 class="requirements-title">Requisitos da senha:</h4>
      <ul class="requirements-list">
        <li [class.valid]="passwordHasUppercase()" [class.invalid]="!passwordHasUppercase()">
          <mat-icon>{{ passwordHasUppercase() ? 'check_circle' : 'cancel' }}</mat-icon>
          <span>Pelo menos uma letra maiúscula</span>
        </li>
        <li [class.valid]="passwordHasLowercase()" [class.invalid]="!passwordHasLowercase()">
          <mat-icon>{{ passwordHasLowercase() ? 'check_circle' : 'cancel' }}</mat-icon>
          <span>Pelo menos uma letra minúscula</span>
        </li>
        <li [class.valid]="passwordHasNumber()" [class.invalid]="!passwordHasNumber()">
          <mat-icon>{{ passwordHasNumber() ? 'check_circle' : 'cancel' }}</mat-icon>
          <span>Pelo menos um número</span>
        </li>
        <li [class.valid]="passwordHasSpecialChar()" [class.invalid]="!passwordHasSpecialChar()">
          <mat-icon>{{ passwordHasSpecialChar() ? 'check_circle' : 'cancel' }}</mat-icon>
          <span>Pelo menos um símbolo especial (&#64;, $, !, etc)</span>
        </li>
      </ul>
    </div>

    <!-- Submit Button -->
    <button
      type="button"
      mat-raised-button
      [disabled]="registerForm.invalid"
      (click)="save()"
      class="register-button"
    >
      <mat-icon>how_to_reg</mat-icon>
      Criar Conta
    </button>
  </form>
</div>